(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let eo,no;function to(){return{geminiUrl:eo,vertexUrl:no}}function oo(n,e,t,o){var r,l;if(!n?.baseUrl){const a=to();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class b{}function T(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const u=a.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[u])){const f=n[u];if(Array.isArray(t))for(let d=0;d<f.length;d++){const c=f[d];s(c,e.slice(l+1),t[d])}else for(const d of f)s(d,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const u=a.slice(0,-3);u in n||(n[u]=[{}]);const f=n[u];s(f[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function i(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const o=e[t];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(a=>i(a,e.slice(t+1))):void 0}else return}else n=n[o]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Le(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function io(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const o=i(n,["resourceName"]);return o!=null&&s(e,["_url","resourceName"],o),e}function so(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],lo(a)),e}function ro(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],ao(a)),e}function lo(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>uo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function ao(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>fo(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function uo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],mo(t)),e}function fo(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],go(t)),e}function co(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function po(n){const e={},t=i(n,["operationName"]);return t!=null&&s(e,["_url","operationName"],t),e}function mo(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],Le(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function go(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],Le(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var be;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(be||(be={}));var ze;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(ze||(ze={}));var k;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(k||(k={}));var Xe;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Xe||(Xe={}));var Qe;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Qe||(Qe={}));var Ze;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Ze||(Ze={}));var Oe;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Oe||(Oe={}));var je;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(je||(je={}));var en;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(en||(en={}));var nn;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(nn||(nn={}));var tn;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(tn||(tn={}));var on;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(on||(on={}));var sn;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(sn||(sn={}));var rn;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(rn||(rn={}));var ln;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ln||(ln={}));var ce;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ce||(ce={}));var an;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(an||(an={}));var _e;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_e||(_e={}));var un;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(un||(un={}));var dn;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dn||(dn={}));var fn;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(fn||(fn={}));var cn;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(cn||(cn={}));var pn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(pn||(pn={}));var mn;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(mn||(mn={}));var gn;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(gn||(gn={}));var hn;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(hn||(hn={}));var yn;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(yn||(yn={}));var Tn;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Tn||(Tn={}));var Cn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Cn||(Cn={}));var vn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vn||(vn={}));var En;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(En||(En={}));var Sn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Sn||(Sn={}));var _n;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(_n||(_n={}));var An;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(An||(An={}));var In;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(In||(In={}));var Mn;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Mn||(Mn={}));var Rn;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Rn||(Rn={}));var Pn;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Pn||(Pn={}));var xn;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(xn||(xn={}));var Nn;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Nn||(Nn={}));var Dn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Dn||(Dn={}));var wn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(wn||(wn={}));var kn;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(kn||(kn={}));var Un;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Un||(Un={}));var Ln;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Ln||(Ln={}));var Fn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Fn||(Fn={}));var Vn;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Vn||(Vn={}));var Q;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Q||(Q={}));class Ae{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ie{get text(){var e,t,o,r,l,a,u,f;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",c=!1;const p=[];for(const m of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;c=!0,d+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),c?d:void 0}get data(){var e,t,o,r,l,a,u,f;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const c=[];for(const p of(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&c.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return c.length>0&&console.warn(`there are non-data parts ${c} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,o,r,l,a,u,f;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(c=>c.functionCall).map(c=>c.functionCall).filter(c=>c!==void 0);if(d?.length!==0)return d}get executableCode(){var e,t,o,r,l,a,u,f,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const c=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(c?.length!==0)return(d=c?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,o,r,l,a,u,f,d;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const c=(f=(u=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(c?.length!==0)return(d=c?.[0])===null||d===void 0?void 0:d.output}}class Gn{}class qn{}class ho{}class yo{}class To{}class Co{}class $n{}class Hn{}class Bn{}class vo{}class pe{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const o=new pe;let r;const l=e;return t?r=ro(l):r=so(l),Object.assign(o,r),o}}class Jn{}class Yn{}class Wn{}class Eo{}class So{}class _o{}class Kn{}class Ao{get text(){var e,t,o;let r="",l=!1;const a=[];for(const u of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[f,d]of Object.entries(u))f!=="text"&&f!=="thought"&&d!==null&&a.push(f);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;l=!0,r+=u.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const a of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[u,f]of Object.entries(a))u!=="inlineData"&&f!==null&&l.push(u);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class Io{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function gt(n,e){const t=M(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ht(n){return Array.isArray(n)?n.map(e=>me(e)):[me(n)]}function me(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function yt(n){const e=me(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Tt(n){const e=me(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function bn(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Ct(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>bn(e)):[bn(n)]}function Ie(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function zn(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Xn(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function F(n){if(n==null)throw new Error("ContentUnion is required");return Ie(n)?n:{role:"user",parts:Ct(n)}}function Fe(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=F(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=F(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>F(t)):[F(e)]}function H(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(zn(n)||Xn(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[F(n)]}const e=[],t=[],o=Ie(n[0]);for(const r of n){const l=Ie(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(zn(r)||Xn(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:Ct(t)}),e}function Mo(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(k).includes(t[0].toUpperCase())?t[0].toUpperCase():k.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(k).includes(o.toUpperCase())?o.toUpperCase():k.TYPE_UNSPECIFIED})}}function Z(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Mo(n.type,e);for(const[a,u]of Object.entries(n))if(u!=null)if(a=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(k).includes(u.toUpperCase())?u.toUpperCase():k.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=Z(u);else if(o.includes(a)){const f=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}f.push(Z(d))}e[a]=f}else if(r.includes(a)){const f={};for(const[d,c]of Object.entries(u))f[d]=Z(c);e[a]=f}else{if(a==="additionalProperties")continue;e[a]=u}return e}function Ve(n){return Z(n)}function Ge(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function qe(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ee(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Z(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Z(e.response));return n}function ne(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Ro(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function W(n,e){if(typeof e!="string")throw new Error("name must be a string");return Ro(n,e,"cachedContents")}function vt(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function z(n){return Le(n)}function Po(n){return n!=null&&typeof n=="object"&&"name"in n}function xo(n){return n!=null&&typeof n=="object"&&"video"in n}function No(n){return n!=null&&typeof n=="object"&&"uri"in n}function Et(n){var e;let t;if(Po(n)&&(t=n.name),!(No(n)&&(t=n.uri,t===void 0))&&!(xo(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function St(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function _t(n){for(const e of["models","tunedModels","publisherModels"])if(Do(n,e))return n[e];return[]}function Do(n,e){return n!==null&&typeof n=="object"&&e in n}function wo(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function ko(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=wo(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function At(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Uo(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function It(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const a of r){if(typeof a!="object"||a===null)continue;const f=a.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function te(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Mt(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lo(n){const e={},t=i(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const o=i(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Ei(a))),s(e,["inlinedResponses"],l)}const r=i(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ci(a))),s(e,["inlinedEmbedContentResponses"],l)}return e}function Fo(n){const e={},t=i(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function Vo(n){const e={},t=i(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(i(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function X(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["metadata","state"]);r!=null&&s(e,["state"],Mt(r));const l=i(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const u=i(n,["metadata","updateTime"]);u!=null&&s(e,["updateTime"],u);const f=i(n,["metadata","model"]);f!=null&&s(e,["model"],f);const d=i(n,["metadata","output"]);return d!=null&&s(e,["dest"],Lo(It(d))),e}function Me(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],Mt(r));const l=i(n,["error"]);l!=null&&s(e,["error"],Pt(l));const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["startTime"]);u!=null&&s(e,["startTime"],u);const f=i(n,["endTime"]);f!=null&&s(e,["endTime"],f);const d=i(n,["updateTime"]);d!=null&&s(e,["updateTime"],d);const c=i(n,["model"]);c!=null&&s(e,["model"],c);const p=i(n,["inputConfig"]);p!=null&&s(e,["src"],Go(p));const m=i(n,["outputConfig"]);return m!=null&&s(e,["dest"],Fo(It(m))),e}function Go(n){const e={},t=i(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function qo(n,e){const t={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(t,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>vi(n,a))),s(t,["requests","requests"],l)}return t}function $o(n){const e={},t=i(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ho(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Bo(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Jo(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],te(n,o)),t}function Yo(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],te(n,o)),t}function Wo(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],zo(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Ko(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Yi(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const d=i(n,["index"]);d!=null&&s(e,["index"],d);const c=i(n,["logprobsResult"]);c!=null&&s(e,["logprobsResult"],c);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Ko(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function bo(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function zo(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Di(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Rt(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>wi(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Xo(n,e){const t={},o=i(n,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function Qo(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],Vo(Uo(r))),t}function Ce(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],qo(n,At(n,r)));const l=i(e,["config"]);return l!=null&&Xo(l,t),t}function Zo(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],M(n,o));const r=i(e,["src"]);r!=null&&s(t,["inputConfig"],$o(At(n,r)));const l=i(e,["config"]);return l!=null&&Qo(l,t),t}function Oo(n,e){const t={},o=i(n,["displayName"]);return e!==void 0&&o!=null&&s(e,["batch","displayName"],o),t}function ve(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],ri(n,r));const l=i(e,["config"]);return l!=null&&Oo(l,t),t}function jo(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],te(n,o)),t}function ei(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],te(n,o)),t}function ni(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],$e(l)),e}function ti(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],Pt(l)),e}function oi(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ii(n,e){const t={},o=i(e,["contents"]);o!=null&&s(t,["requests[]","request","content"],Fe(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],si(r,t)),t}function si(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function ri(n,e){const t={},o=i(e,["fileName"]);o!=null&&s(t,["file_name"],o);const r=i(e,["inlinedRequests"]);return r!=null&&s(t,["requests"],ii(n,r)),t}function li(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ai(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ui(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function di(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function fi(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function ci(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function pi(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Rt(F(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const c=i(e,["stopSequences"]);c!=null&&s(o,["stopSequences"],c);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],Fi(Ve(S)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=i(e,["safetySettings"]);if(t!==void 0&&E!=null){let x=E;Array.isArray(x)&&(x=x.map(J=>Li(J))),s(t,["safetySettings"],x)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let x=ne(A);Array.isArray(x)&&(x=x.map(J=>Ji(ee(J)))),s(t,["tools"],x)}const _=i(e,["toolConfig"]);if(t!==void 0&&_!=null&&s(t,["toolConfig"],Bi(_)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=i(e,["cachedContent"]);t!==void 0&&R!=null&&s(t,["cachedContent"],W(n,R));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const L=i(e,["mediaResolution"]);L!=null&&s(o,["mediaResolution"],L);const I=i(e,["speechConfig"]);if(I!=null&&s(o,["speechConfig"],qi(Ge(I))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=i(e,["thinkingConfig"]);return N!=null&&s(o,["thinkingConfig"],$i(N)),o}function mi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>Wo(d))),s(e,["candidates"],f)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function gi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],te(n,o)),t}function hi(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],te(n,o)),t}function yi(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],oi(t)),e}function Ti(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Si(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Ci(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],Vi(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],$e(o)),e}function vi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["request","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>Rt(u))),s(t,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["request","generationConfig"],pi(n,l,t)),t}function Ei(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],mi(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],$e(o)),e}function Si(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function $e(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function Pt(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function _i(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Ai(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Ii(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Mi(n){const e={},t=i(n,["config"]);return t!=null&&Ai(t,e),e}function Ri(n){const e={},t=i(n,["config"]);return t!=null&&Ii(t,e),e}function Pi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>X(a))),s(e,["batchJobs"],l)}return e}function xi(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Me(a))),s(e,["batchJobs"],l)}return e}function Ni(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Gi(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Di(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],bi(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ho(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],li(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ui(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function wi(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],zi(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Bo(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],ai(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],di(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ki(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Ui(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],_i(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Li(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function Fi(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const f=i(n,["items"]);f!=null&&s(e,["items"],f);const d=i(n,["maxItems"]);d!=null&&s(e,["maxItems"],d);const c=i(n,["maxLength"]);c!=null&&s(e,["maxLength"],c);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const _=i(n,["required"]);_!=null&&s(e,["required"],_);const R=i(n,["title"]);R!=null&&s(e,["title"],R);const P=i(n,["type"]);return P!=null&&s(e,["type"],P),e}function Vi(n){const e={},t=i(n,["embedding"]);t!=null&&s(e,["embedding"],bo(t));const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function Gi(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],xt(o)),e}function qi(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],xt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Ni(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function $i(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Hi(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function Bi(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],fi(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Ui(o)),e}function Ji(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(d=>ci(d))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Ti(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],yi(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Wi());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],Hi(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Yi(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ki(r))),s(e,["urlMetadata"],o)}return e}function Wi(){return{}}function Ki(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function bi(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function zi(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function xt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],ki(t)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var K;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(K||(K={}));class re{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xi extends b{constructor(e){super(),this.apiClient=e,this.create=async t=>{var o,r;if(this.apiClient.isVertexAI())return t.config=this.formatDestination(t.src,t.config),this.createInternal(t);const l=t.src;if(!(Array.isArray(t.src)||l.inlinedRequests!==void 0))return this.createInternal(t);const u=this.createInlinedGenerateContentRequest(t),f=u.path,d=u.body,c=Ce(this.apiClient,t)._query||{};return this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()).then(m=>X(m))},this.createEmbeddings=async t=>{var o,r;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(t.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(t);const u=this.createInlinedEmbedContentRequest(t),f=u.path,d=u.body,c=ve(this.apiClient,t)._query||{};return this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()).then(m=>X(m))},this.list=async(t={})=>new re(K.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=Ce(this.apiClient,e),o=t._url,r=T("{model}:batchGenerateContent",o),u=t.batch.inputConfig.requests,f=u.requests,d=[];for(const c of f){const p=Object.assign({},c);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const g=p.request;g.systemInstruction=m,p.request=g}d.push(p)}return u.requests=d,delete t.config,delete t._url,delete t._query,{path:r,body:t}}createInlinedEmbedContentRequest(e){const t=ve(this.apiClient,e),o=t._url,r=T("{model}:asyncBatchEmbedContent",o),u=t.batch.inputConfig.requests,f=u.requests,d=[];delete u.config;for(const c of f){const p=Object.assign({},c),m=p.request;for(const g in p)g!=="request"&&(m[g]=p[g],delete p[g]);d.push(p)}return u.requests=d,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),a=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(a)o.dest=`${a}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Zo(this.apiClient,e);return u=T("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Me(c))}else{const d=Ce(this.apiClient,e);return u=T("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>X(c))}}async createEmbeddingsInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=ve(this.apiClient,e);return l=T("{model}:asyncBatchEmbedContent",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>X(f))}}async get(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=hi(this.apiClient,e);return u=T("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Me(c))}else{const d=gi(this.apiClient,e);return u=T("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>X(c))}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const f=Yo(this.apiClient,e);a=T("batchPredictionJobs/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const f=Jo(this.apiClient,e);a=T("batches/{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Ri(e);return u=T("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=xi(c),m=new Kn;return Object.assign(m,p),m})}else{const d=Mi(e);return u=T("batches",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Pi(c),m=new Kn;return Object.assign(m,p),m})}}async delete(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=ei(this.apiClient,e);return u=T("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>ti(c))}else{const d=jo(this.apiClient,e);return u=T("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>ni(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qi(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Zi(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Qi(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Oi(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ji(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ue(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function de(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const u=i(n,["expireTime"]);u!=null&&s(e,["expireTime"],u);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function Qn(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Fs(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Zn(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Vs(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function es(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let c=H(a);Array.isArray(c)&&(c=c.map(p=>Qn(p))),s(e,["contents"],c)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],Qn(F(u)));const f=i(n,["tools"]);if(e!==void 0&&f!=null){let c=f;Array.isArray(c)&&(c=c.map(p=>Ys(p))),s(e,["tools"],c)}const d=i(n,["toolConfig"]);if(e!==void 0&&d!=null&&s(e,["toolConfig"],Bs(d)),i(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function ns(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let p=H(a);Array.isArray(p)&&(p=p.map(m=>Zn(m))),s(e,["contents"],p)}const u=i(n,["systemInstruction"]);e!==void 0&&u!=null&&s(e,["systemInstruction"],Zn(F(u)));const f=i(n,["tools"]);if(e!==void 0&&f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>Ws(m))),s(e,["tools"],p)}const d=i(n,["toolConfig"]);e!==void 0&&d!=null&&s(e,["toolConfig"],Js(d));const c=i(n,["kmsKeyName"]);return e!==void 0&&c!=null&&s(e,["encryption_spec","kmsKeyName"],c),t}function ts(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],gt(n,o));const r=i(e,["config"]);return r!=null&&es(r,t),t}function os(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],gt(n,o));const r=i(e,["config"]);return r!=null&&ns(r,t),t}function is(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],W(n,o)),t}function ss(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],W(n,o)),t}function rs(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function ls(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function as(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function us(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ds(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function fs(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function cs(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ps(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ms(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function gs(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function hs(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function ys(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Ts(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function Cs(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],W(n,o)),t}function vs(n,e){const t={},o=i(e,["name"]);return o!=null&&s(t,["_url","name"],W(n,o)),t}function Es(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Zi(t)),e}function Ss(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],as(t)),e}function _s(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],us(t)),e}function As(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Ms(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Is(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],Rs(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Ms(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Rs(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ps(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function xs(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Ns(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Ds(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ws(n){const e={},t=i(n,["config"]);return t!=null&&Ns(t,e),e}function ks(n){const e={},t=i(n,["config"]);return t!=null&&Ds(t,e),e}function Us(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ue(a))),s(e,["cachedContents"],l)}return e}function Ls(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>de(a))),s(e,["cachedContents"],l)}return e}function Fs(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Os(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Oi(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],fs(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ps(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Vs(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],js(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ji(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],cs(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ms(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Gs(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Ps(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function qs(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],xs(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function $s(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function Hs(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function Bs(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],gs(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Gs(o)),e}function Js(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],hs(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],qs(o)),e}function Ys(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(d=>ys(d))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],As(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Ss(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Qs());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],$s(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Ws(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Ts(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Is(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],_s(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],ds(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Es(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],Zs());const d=i(n,["computerUse"]);d!=null&&s(e,["computerUse"],Hs(d));const c=i(n,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function Ks(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function bs(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function zs(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],W(n,o));const r=i(e,["config"]);return r!=null&&Ks(r,t),t}function Xs(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],W(n,o));const r=i(e,["config"]);return r!=null&&bs(r,t),t}function Qs(){return{}}function Zs(){return{}}function Os(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function js(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class er extends b{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new re(K.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=os(this.apiClient,e);return u=T("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>de(c))}else{const d=ts(this.apiClient,e);return u=T("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>ue(c))}}async get(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=vs(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>de(c))}else{const d=Cs(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>ue(c))}}async delete(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=ss(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=ls(c),m=new Yn;return Object.assign(m,p),m})}else{const d=is(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=rs(c),m=new Yn;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Xs(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>de(c))}else{const d=zs(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>ue(c))}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=ks(e);return u=T("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Ls(c),m=new Wn;return Object.assign(m,p),m})}else{const d=ws(e);return u=T("cachedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Us(c),m=new Wn;return Object.assign(m,p),m})}}}function On(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(n){return this instanceof D?(this.v=n,this):new D(n)}function O(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function u(g,h){o[g]&&(r[g]=function(y){return new Promise(function(C,S){l.push([g,y,C,S])>1||f(g,y)})},h&&(r[g]=h(r[g])))}function f(g,h){try{d(o[g](h))}catch(y){m(l[0][3],y)}}function d(g){g.value instanceof D?Promise.resolve(g.value.v).then(c,p):m(l[0][2],g)}function c(g){f("next",g)}function p(g){f("throw",g)}function m(g,h){g(h),l.shift(),l.length&&f(l[0][0],l[0][1])}}function se(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof On=="function"?On(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(a){return new Promise(function(u,f){a=n[l](a),r(u,f,a.done,a.value)})}}function r(l,a,u,f){Promise.resolve(f).then(function(d){l({value:d,done:u})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nr(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Nt(t)}function Nt(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function tr(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function jn(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!Nt(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class or{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ir(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ir{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),tr(l)}async sendMessage(e){var t;await this.sendPromise;const o=F(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,u;const f=await r,d=(a=(l=f.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,c=f.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];c!=null&&(m=(u=c.slice(p))!==null&&u!==void 0?u:[]);const g=d?[d]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=F(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?jn(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,r;return O(this,arguments,function*(){var a,u,f,d;const c=[];try{for(var p=!0,m=se(e),g;g=yield D(m.next()),a=g.done,!a;p=!0){d=g.value,p=!1;const h=d;if(nr(h)){const y=(r=(o=h.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;y!==void 0&&c.push(y)}yield yield D(h)}}catch(h){u={error:h}}finally{try{!p&&!a&&(f=m.return)&&(yield D(f.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,c)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...jn(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ge extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ge.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sr(n){const e={},t=i(n,["file"]);return t!=null&&s(e,["file"],fr(t)),e}function rr(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function lr(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],Et(t)),e}function ar(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Re(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const d=i(n,["sha256Hash"]);d!=null&&s(e,["sha256Hash"],d);const c=i(n,["uri"]);c!=null&&s(e,["uri"],c);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(n,["error"]);return y!=null&&s(e,["error"],ur(y)),e}function ur(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function dr(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function fr(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const u=i(n,["expirationTime"]);u!=null&&s(e,["expirationTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const d=i(n,["sha256Hash"]);d!=null&&s(e,["sha256Hash"],d);const c=i(n,["uri"]);c!=null&&s(e,["uri"],c);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(n,["error"]);return y!=null&&s(e,["error"],dr(y)),e}function cr(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","file"],Et(t)),e}function pr(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function mr(n){const e={},t=i(n,["config"]);return t!=null&&pr(t,e),e}function gr(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Re(a))),s(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hr extends b{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new re(K.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Re(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mr(e);return l=T("files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),r.then(f=>{const d=gr(f),c=new Eo;return Object.assign(c,d),c})}}async createInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=sr(e);return l=T("upload/v1beta/files",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>{const d=rr(f),c=new So;return Object.assign(c,d),c})}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=cr(e);return l=T("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>Re(f))}}async delete(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=lr(e);return l=T("files/{file}",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),r.then(f=>{const d=ar(f),c=new _o;return Object.assign(c,d),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yr(){return{}}function Tr(){return{}}function Cr(){return{}}function vr(){return{}}function Er(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Sr(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);o!=null&&s(e,["mimeType"],o);const r=i(n,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],cl(r)),e}function et(){return{}}function nt(){return{}}function _r(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Er(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function Ar(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Ir(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Mr(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Rr(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Pr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function xr(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Nr(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Nl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Dr(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Dl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function wr(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>wl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function kr(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>kl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ur(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Bl(o)),e}function Lr(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Jl(o)),e}function Fr(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Vr(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Gr(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function qr(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function $r(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Hr(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Br(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Dt(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function wt(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Jr(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Yr(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Wr(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Kr(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function br(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],_r(t)),e}function zr(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Fr(t)),e}function Xr(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Vr(t)),e}function Qr(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Or(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Zr(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],jr(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Or(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function jr(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function el(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","seed"],c);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Wl(qe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],wr(F(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let _=ne(h);Array.isArray(_)&&(_=_.map(R=>Xl(ee(R)))),s(e,["setup","tools"],_)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],$l(y));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],et());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],et());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],Gl(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],Ur(E));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Fl(A)),t}function nl(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","seed"],c);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Kl(qe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],kr(F(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let _=ne(h);Array.isArray(_)&&(_=_.map(R=>Ql(ee(R)))),s(e,["setup","tools"],_)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Hl(y));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],nt());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],nt());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],ql(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],Lr(E));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Vl(A)),t}function tl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],M(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],el(r,t)),t}function ol(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],M(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],nl(r,t)),t}function il(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>aa(r))),s(e,["weightedPrompts"],o)}return e}function kt(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Vt(r))),s(e,["weightedPrompts"],o)}return e}function Pe(n){const e={},t=i(n,["setup"]);t!=null&&s(e,["setup"],Ut(t));const o=i(n,["clientContent"]);o!=null&&s(e,["clientContent"],kt(o));const r=i(n,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],Lt(r));const l=i(n,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function Ut(n){const e={},t=i(n,["model"]);return t!=null&&s(e,["model"],t),e}function sl(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function rl(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const f=i(n,["brightness"]);f!=null&&s(e,["brightness"],f);const d=i(n,["scale"]);d!=null&&s(e,["scale"],d);const c=i(n,["muteBass"]);c!=null&&s(e,["muteBass"],c);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function Lt(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const u=i(n,["density"]);u!=null&&s(e,["density"],u);const f=i(n,["brightness"]);f!=null&&s(e,["brightness"],f);const d=i(n,["scale"]);d!=null&&s(e,["scale"],d);const c=i(n,["muteBass"]);c!=null&&s(e,["muteBass"],c);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function ll(n){const e={},t=i(n,["audioChunks"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Sr(r))),s(e,["audioChunks"],o)}return e}function al(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],ul());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],ll(o));const r=i(n,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],sl(r)),e}function ul(){return{}}function dl(n){const e={},t=i(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],Lt(t)),e}function fl(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Vt(r))),s(e,["weightedPrompts"],o)}return e}function cl(n){const e={},t=i(n,["clientContent"]);t!=null&&s(e,["clientContent"],il(t));const o=i(n,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],rl(o)),e}function pl(n){const e={},t=i(n,["media"]);if(t!=null){let d=ht(t);Array.isArray(d)&&(d=d.map(c=>c)),s(e,["mediaChunks"],d)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],Tt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],yt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],Cr()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],yr()),e}function ml(n){const e={},t=i(n,["media"]);if(t!=null){let d=ht(t);Array.isArray(d)&&(d=d.map(c=>c)),s(e,["mediaChunks"],d)}const o=i(n,["audio"]);o!=null&&s(e,["audio"],Tt(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],yt(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],vr()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Tr()),e}function gl(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],Nr(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],tt(u));const f=i(n,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],tt(f));const d=i(n,["urlContextMetadata"]);d!=null&&s(e,["urlContextMetadata"],Zl(d));const c=i(n,["turnCompleteReason"]);c!=null&&s(e,["turnCompleteReason"],c);const p=i(n,["waitingForInput"]);return p!=null&&s(e,["waitingForInput"],p),e}function hl(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],Dr(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const u=i(n,["inputTranscription"]);u!=null&&s(e,["inputTranscription"],ot(u));const f=i(n,["outputTranscription"]);f!=null&&s(e,["outputTranscription"],ot(f));const d=i(n,["turnCompleteReason"]);d!=null&&s(e,["turnCompleteReason"],d);const c=i(n,["waitingForInput"]);return c!=null&&s(e,["waitingForInput"],c),e}function yl(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function Tl(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function Cl(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],_l());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],gl(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],Rl(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Il(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],na(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],yl(u));const f=i(n,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],El(f)),e}function vl(n){const e={},t=i(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],Al(t));const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],hl(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],Pl(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Ml(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],ta(a));const u=i(n,["goAway"]);u!=null&&s(e,["goAway"],Tl(u));const f=i(n,["sessionResumptionUpdate"]);return f!=null&&s(e,["sessionResumptionUpdate"],Sl(f)),e}function El(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Sl(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function _l(){return{}}function Al(n){const e={},t=i(n,["sessionId"]);return t!=null&&s(e,["sessionId"],t),e}function Il(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function Ml(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function Rl(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Dt(r))),s(e,["functionCalls"],o)}return e}function Pl(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>wt(r))),s(e,["functionCalls"],o)}return e}function le(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function ae(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function xl(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Yl(r))),s(e,["speakerVoiceConfigs"],o)}return e}function Nl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],oa(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Mr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],qr(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Dt(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Dl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],ia(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Rr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],$r(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],wt(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function wl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],sa(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Pr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Hr(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Jr(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function kl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],ra(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],xr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Br(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Yr(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ul(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Ll(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Fl(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Vl(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Gl(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Ar(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function ql(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Ir(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function $l(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Hl(n){const e={},t=i(n,["handle"]);t!=null&&s(e,["handle"],t);const o=i(n,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function Bl(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Jl(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Yl(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Ft(o)),e}function Wl(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Ft(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],xl(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Kl(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],la(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function bl(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function zl(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function Xl(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(d=>Wr(d))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Qr(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],zr(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Ol());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],bl(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Ql(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Kr(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Zr(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Xr(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Gr(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],br(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],jl());const d=i(n,["computerUse"]);d!=null&&s(e,["computerUse"],zl(d));const c=i(n,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function tt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function ot(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function Zl(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ea(r))),s(e,["urlMetadata"],o)}return e}function Ol(){return{}}function jl(){return{}}function ea(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function na(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const f=i(n,["promptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>le(g))),s(e,["promptTokensDetails"],m)}const d=i(n,["cacheTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>le(g))),s(e,["cacheTokensDetails"],m)}const c=i(n,["responseTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>le(g))),s(e,["responseTokensDetails"],m)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>le(g))),s(e,["toolUsePromptTokensDetails"],m)}return e}function ta(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const u=i(n,["totalTokenCount"]);u!=null&&s(e,["totalTokenCount"],u);const f=i(n,["promptTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(h=>ae(h))),s(e,["promptTokensDetails"],g)}const d=i(n,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>ae(h))),s(e,["cacheTokensDetails"],g)}const c=i(n,["candidatesTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>ae(h))),s(e,["responseTokensDetails"],g)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>ae(h))),s(e,["toolUsePromptTokensDetails"],g)}const m=i(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function oa(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ia(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function sa(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ra(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ft(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Ul(t)),e}function la(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Ll(t)),e}function aa(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function Vt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ua(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function da(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],ua(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const u=i(n,["oidcConfig"]);return u!=null&&s(e,["oidcConfig"],u),e}function fa(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ca(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function pa(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ma(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function ga(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Ia(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Ta(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Wd(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const d=i(n,["index"]);d!=null&&s(e,["index"],d);const c=i(n,["logprobsResult"]);c!=null&&s(e,["logprobsResult"],c);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function ha(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Ma(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],Ca(o));const r=i(n,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Kd(a));const u=i(n,["avgLogprobs"]);u!=null&&s(e,["avgLogprobs"],u);const f=i(n,["groundingMetadata"]);f!=null&&s(e,["groundingMetadata"],f);const d=i(n,["index"]);d!=null&&s(e,["index"],d);const c=i(n,["logprobsResult"]);c!=null&&s(e,["logprobsResult"],c);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function ya(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);return r!=null&&s(e,["step"],r),e}function Ta(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Ca(n){const e={},t=i(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function va(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let l=H(r);Array.isArray(l)&&(l=l.map(a=>oe(a))),s(t,["contents"],l)}return t}function Ea(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["tokensInfo"]);return o!=null&&s(e,["tokensInfo"],o),e}function Sa(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function _a(n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const o=i(n,["statistics"]);return o!=null&&s(e,["statistics"],Aa(o)),e}function Aa(n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const o=i(n,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function Ia(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>nd(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ma(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>td(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function he(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>od(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function oe(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>id(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ra(n){const e={},t=i(n,["controlType"]);t!=null&&s(e,["controlType"],t);const o=i(n,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function Pa(n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xa(n,e){const t={},o=i(n,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],oe(F(o)));const r=i(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(u=>Bt(u))),s(e,["tools"],a)}const l=i(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),t}function Na(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>he(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&Pa(l),t}function Da(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>oe(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&xa(l,t),t}function wa(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function ka(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function Ua(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function La(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function Fa(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Va(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Ga(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function qa(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function $a(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const C=i(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const S=i(n,["editMode"]);e!==void 0&&S!=null&&s(e,["parameters","editMode"],S);const v=i(n,["baseSteps"]);return e!==void 0&&v!=null&&s(e,["parameters","editConfig","baseSteps"],v),t}function Ha(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>cd(f))),s(t,["instances[0]","referenceImages"],u)}const a=i(e,["config"]);return a!=null&&$a(a,t),t}function Ba(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ye(l))),s(e,["generatedImages"],r)}return e}function Ja(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Ya(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const u=i(n,["autoTruncate"]);return e!==void 0&&u!=null&&s(e,["parameters","autoTruncate"],u),t}function Wa(){return{}}function Ka(n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function ba(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);r!=null&&s(t,["requests[]","content"],Fe(n,r));const l=i(e,["config"]);l!=null&&Ja(l,t);const a=i(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],M(n,a)),t}function za(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);r!=null&&s(t,["instances[]","content"],Fe(n,r));const l=i(e,["config"]);return l!=null&&Ya(l,t),t}function Xa(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Sa(a))),s(e,["embeddings"],l)}return i(n,["metadata"])!=null&&s(e,["metadata"],Wa()),e}function Qa(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>_a(a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],Ka(r)),e}function Za(n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const o=i(n,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function Oa(n){const e={},t=i(n,["excludeDomains"]);return t!=null&&s(e,["excludeDomains"],t),e}function ja(n){const e={},t=i(n,["label"]);t!=null&&s(e,["label"],t);const o=i(n,["score"]);return o!=null&&s(e,["score"],o),e}function eu(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function nu(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function tu(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ou(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function iu(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function su(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function ru(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function lu(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function au(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function uu(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function du(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function fu(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const u=i(n,["responseJsonSchema"]);return u!=null&&s(e,["responseJsonSchema"],u),e}function cu(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],he(F(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const c=i(e,["stopSequences"]);c!=null&&s(o,["stopSequences"],c);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],yd(Ve(S)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const E=i(e,["safetySettings"]);if(t!==void 0&&E!=null){let x=E;Array.isArray(x)&&(x=x.map(J=>gd(J))),s(t,["safetySettings"],x)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let x=ne(A);Array.isArray(x)&&(x=x.map(J=>Ld(ee(J)))),s(t,["tools"],x)}const _=i(e,["toolConfig"]);if(t!==void 0&&_!=null&&s(t,["toolConfig"],kd(_)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=i(e,["cachedContent"]);t!==void 0&&R!=null&&s(t,["cachedContent"],W(n,R));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const L=i(e,["mediaResolution"]);L!=null&&s(o,["mediaResolution"],L);const I=i(e,["speechConfig"]);if(I!=null&&s(o,["speechConfig"],Id(Ge(I))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=i(e,["thinkingConfig"]);return N!=null&&s(o,["thinkingConfig"],xd(N)),o}function pu(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],oe(F(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const u=i(e,["topK"]);u!=null&&s(o,["topK"],u);const f=i(e,["candidateCount"]);f!=null&&s(o,["candidateCount"],f);const d=i(e,["maxOutputTokens"]);d!=null&&s(o,["maxOutputTokens"],d);const c=i(e,["stopSequences"]);c!=null&&s(o,["stopSequences"],c);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const C=i(e,["responseMimeType"]);C!=null&&s(o,["responseMimeType"],C);const S=i(e,["responseSchema"]);S!=null&&s(o,["responseSchema"],Td(Ve(S)));const v=i(e,["responseJsonSchema"]);v!=null&&s(o,["responseJsonSchema"],v);const E=i(e,["routingConfig"]);E!=null&&s(o,["routingConfig"],E);const A=i(e,["modelSelectionConfig"]);A!=null&&s(o,["modelConfig"],ju(A));const _=i(e,["safetySettings"]);if(t!==void 0&&_!=null){let Y=_;Array.isArray(Y)&&(Y=Y.map(Te=>hd(Te))),s(t,["safetySettings"],Y)}const R=i(e,["tools"]);if(t!==void 0&&R!=null){let Y=ne(R);Array.isArray(Y)&&(Y=Y.map(Te=>Bt(ee(Te)))),s(t,["tools"],Y)}const P=i(e,["toolConfig"]);t!==void 0&&P!=null&&s(t,["toolConfig"],Ud(P));const L=i(e,["labels"]);t!==void 0&&L!=null&&s(t,["labels"],L);const I=i(e,["cachedContent"]);t!==void 0&&I!=null&&s(t,["cachedContent"],W(n,I));const N=i(e,["responseModalities"]);N!=null&&s(o,["responseModalities"],N);const x=i(e,["mediaResolution"]);x!=null&&s(o,["mediaResolution"],x);const J=i(e,["speechConfig"]);J!=null&&s(o,["speechConfig"],Md(Ge(J)));const We=i(e,["audioTimestamp"]);We!=null&&s(o,["audioTimestamp"],We);const Ke=i(e,["thinkingConfig"]);return Ke!=null&&s(o,["thinkingConfig"],Nd(Ke)),o}function it(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>he(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],cu(n,l,t)),t}function st(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["contents"]);if(r!=null){let a=H(r);Array.isArray(a)&&(a=a.map(u=>oe(u))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],pu(n,l,t)),t}function rt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>ga(d))),s(e,["candidates"],f)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const u=i(n,["usageMetadata"]);return u!=null&&s(e,["usageMetadata"],u),e}function lt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(c=>ha(c))),s(e,["candidates"],d)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const u=i(n,["responseId"]);u!=null&&s(e,["responseId"],u);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function mu(n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const u=i(n,["personGeneration"]);e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u);const f=i(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&s(e,["parameters","includeSafetyAttributes"],f);const d=i(n,["includeRaiReason"]);e!==void 0&&d!=null&&s(e,["parameters","includeRaiReason"],d);const c=i(n,["language"]);e!==void 0&&c!=null&&s(e,["parameters","language"],c);const p=i(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=i(n,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function gu(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const u=i(n,["guidanceScale"]);e!==void 0&&u!=null&&s(e,["parameters","guidanceScale"],u);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const d=i(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&s(e,["parameters","safetySetting"],d);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const C=i(n,["addWatermark"]);e!==void 0&&C!=null&&s(e,["parameters","addWatermark"],C);const S=i(n,["imageSize"]);e!==void 0&&S!=null&&s(e,["parameters","sampleImageSize"],S);const v=i(n,["enhancePrompt"]);return e!==void 0&&v!=null&&s(e,["parameters","enhancePrompt"],v),t}function hu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&mu(l,t),t}function yu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&gu(l,t),t}function Tu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Nu(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],$t(r)),e}function Cu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ye(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],Ht(r)),e}function vu(n,e){const t={},o=i(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(n,["aspectRatio"]);e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l);const a=i(n,["resolution"]);e!==void 0&&a!=null&&s(e,["parameters","resolution"],a);const u=i(n,["personGeneration"]);if(e!==void 0&&u!=null&&s(e,["parameters","personGeneration"],u),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=i(n,["negativePrompt"]);e!==void 0&&f!=null&&s(e,["parameters","negativePrompt"],f);const d=i(n,["enhancePrompt"]);if(e!==void 0&&d!=null&&s(e,["parameters","enhancePrompt"],d),i(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(i(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(i(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Eu(n,e){const t={},o=i(n,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const u=i(n,["seed"]);e!==void 0&&u!=null&&s(e,["parameters","seed"],u);const f=i(n,["aspectRatio"]);e!==void 0&&f!=null&&s(e,["parameters","aspectRatio"],f);const d=i(n,["resolution"]);e!==void 0&&d!=null&&s(e,["parameters","resolution"],d);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const p=i(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=i(n,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const h=i(n,["generateAudio"]);e!==void 0&&h!=null&&s(e,["parameters","generateAudio"],h);const y=i(n,["lastFrame"]);e!==void 0&&y!=null&&s(e,["instances[0]","lastFrame"],B(y));const C=i(n,["referenceImages"]);if(e!==void 0&&C!=null){let E=C;Array.isArray(E)&&(E=E.map(A=>ef(A))),s(e,["instances[0]","referenceImages"],E)}const S=i(n,["mask"]);e!==void 0&&S!=null&&s(e,["instances[0]","mask"],jd(S));const v=i(n,["compressionQuality"]);return e!==void 0&&v!=null&&s(e,["parameters","compressionQuality"],v),t}function Su(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],Mu(a)),e}function _u(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Ru(a)),e}function Au(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);if(l!=null&&s(t,["instances[0]","image"],qt(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["source"]);a!=null&&Pu(a,t);const u=i(e,["config"]);return u!=null&&vu(u,t),t}function Iu(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],B(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],Jt(a));const u=i(e,["source"]);u!=null&&xu(u,t);const f=i(e,["config"]);return f!=null&&Eu(f,t),t}function Mu(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>wu(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Ru(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>ku(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Pu(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);if(e!==void 0&&r!=null&&s(e,["instances[0]","image"],qt(r)),i(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return t}function xu(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],B(r));const l=i(n,["video"]);return e!==void 0&&l!=null&&s(e,["instances[0]","video"],Jt(l)),t}function Nu(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],Hu(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],$t(r)),e}function ye(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],Gt(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);r!=null&&s(e,["safetyAttributes"],Ht(r));const l=i(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function Du(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["mask"],Gt(t));const o=i(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ja(l))),s(e,["labels"],r)}return e}function wu(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Zd(t)),e}function ku(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],Od(t)),e}function Uu(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function Lu(n,e){const t={},o=i(e,["model"]);return o!=null&&s(t,["_url","name"],M(n,o)),t}function Fu(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],da(t)),e}function Vu(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ga(t)),e}function Gu(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],qa(t)),e}function qu(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Bu(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function $u(n){const e={},t=i(n,["timeRangeFilter"]);t!=null&&s(e,["timeRangeFilter"],Ju(t));const o=i(n,["excludeDomains"]);return o!=null&&s(e,["excludeDomains"],o),e}function Hu(n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],z(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Gt(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],z(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function qt(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],z(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function B(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],z(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Bu(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ju(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Yu(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Wu(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Ku(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],St(n,u)),o}function bu(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const u=i(e,["queryBase"]);return t!==void 0&&u!=null&&s(t,["_url","models_url"],St(n,u)),o}function zu(n,e){const t={},o=i(e,["config"]);return o!=null&&Ku(n,o,t),t}function Xu(n,e){const t={},o=i(e,["config"]);return o!=null&&bu(n,o,t),t}function Qu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=_t(r);Array.isArray(l)&&(l=l.map(a=>xe(a))),s(e,["models"],l)}return e}function Zu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=_t(r);Array.isArray(l)&&(l=l.map(a=>Ne(a))),s(e,["models"],l)}return e}function Ou(n){const e={},t=i(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const o=i(n,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function xe(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["version"]);l!=null&&s(e,["version"],l);const a=i(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],Fd(a));const u=i(n,["inputTokenLimit"]);u!=null&&s(e,["inputTokenLimit"],u);const f=i(n,["outputTokenLimit"]);f!=null&&s(e,["outputTokenLimit"],f);const d=i(n,["supportedGenerationMethods"]);return d!=null&&s(e,["supportedActions"],d),e}function Ne(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["versionId"]);l!=null&&s(e,["version"],l);const a=i(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Za(m))),s(e,["endpoints"],p)}const u=i(n,["labels"]);u!=null&&s(e,["labels"],u);const f=i(n,["_self"]);f!=null&&s(e,["tunedModelInfo"],Vd(f));const d=i(n,["defaultCheckpointId"]);d!=null&&s(e,["defaultCheckpointId"],d);const c=i(n,["checkpoints"]);if(c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>ya(m))),s(e,["checkpoints"],p)}return e}function ju(n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function ed(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ad(r))),s(e,["speakerVoiceConfigs"],o)}return e}function nd(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],nf(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],fa(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],eu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],iu(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function td(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],tf(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ca(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],nu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],su(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function od(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],of(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],pa(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],tu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],ru(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function id(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],sf(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ma(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],ou(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],lu(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function sd(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function rd(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ld(n){const e={},t=i(n,["productImage"]);return t!=null&&s(e,["image"],B(t)),e}function ad(n,e){const t={},o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const d=i(n,["addWatermark"]);e!==void 0&&d!=null&&s(e,["parameters","addWatermark"],d);const c=i(n,["outputMimeType"]);e!==void 0&&c!=null&&s(e,["parameters","outputOptions","mimeType"],c);const p=i(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","compressionQuality"],p);const m=i(n,["enhancePrompt"]);return e!==void 0&&m!=null&&s(e,["parameters","enhancePrompt"],m),t}function ud(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["source"]);r!=null&&fd(r,t);const l=i(e,["config"]);return l!=null&&ad(l,t),t}function dd(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ye(r))),s(e,["generatedImages"],o)}return e}function fd(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],B(r));const l=i(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(u=>ld(u))),s(e,["instances[0]","productImages"],a)}return t}function cd(n){const e={},t=i(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],B(t));const o=i(n,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Ou(l));const a=i(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],Ra(a));const u=i(n,["styleImageConfig"]);u!=null&&s(e,["styleImageConfig"],Rd(u));const f=i(n,["subjectImageConfig"]);return f!=null&&s(e,["subjectImageConfig"],Pd(f)),e}function pd(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Yu(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function md(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Wu(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function $t(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function Ht(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function gd(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function hd(n){const e={},t=i(n,["method"]);t!=null&&s(e,["method"],t);const o=i(n,["category"]);o!=null&&s(e,["category"],o);const r=i(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function yd(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const f=i(n,["items"]);f!=null&&s(e,["items"],f);const d=i(n,["maxItems"]);d!=null&&s(e,["maxItems"],d);const c=i(n,["maxLength"]);c!=null&&s(e,["maxLength"],c);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const _=i(n,["required"]);_!=null&&s(e,["required"],_);const R=i(n,["title"]);R!=null&&s(e,["title"],R);const P=i(n,["type"]);return P!=null&&s(e,["type"],P),e}function Td(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const u=i(n,["format"]);u!=null&&s(e,["format"],u);const f=i(n,["items"]);f!=null&&s(e,["items"],f);const d=i(n,["maxItems"]);d!=null&&s(e,["maxItems"],d);const c=i(n,["maxLength"]);c!=null&&s(e,["maxLength"],c);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const C=i(n,["minimum"]);C!=null&&s(e,["minimum"],C);const S=i(n,["nullable"]);S!=null&&s(e,["nullable"],S);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const E=i(n,["properties"]);E!=null&&s(e,["properties"],E);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const _=i(n,["required"]);_!=null&&s(e,["required"],_);const R=i(n,["title"]);R!=null&&s(e,["title"],R);const P=i(n,["type"]);return P!=null&&s(e,["type"],P),e}function Cd(n){const e={},t=i(n,["image"]);return t!=null&&s(e,["image"],B(t)),e}function vd(n,e){const t={},o=i(n,["mode"]);e!==void 0&&o!=null&&s(e,["parameters","mode"],o);const r=i(n,["maxPredictions"]);e!==void 0&&r!=null&&s(e,["parameters","maxPredictions"],r);const l=i(n,["confidenceThreshold"]);e!==void 0&&l!=null&&s(e,["parameters","confidenceThreshold"],l);const a=i(n,["maskDilation"]);e!==void 0&&a!=null&&s(e,["parameters","maskDilation"],a);const u=i(n,["binaryColorThreshold"]);return e!==void 0&&u!=null&&s(e,["parameters","binaryColorThreshold"],u),t}function Ed(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["source"]);r!=null&&_d(r,t);const l=i(e,["config"]);return l!=null&&vd(l,t),t}function Sd(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Du(r))),s(e,["generatedMasks"],o)}return e}function _d(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["image"]);e!==void 0&&r!=null&&s(e,["instances[0]","image"],B(r));const l=i(n,["scribbleImage"]);return e!==void 0&&l!=null&&s(e,["instances[0]","scribble"],Cd(l)),t}function Ad(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Yt(o)),e}function Id(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Yt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],ed(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Md(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],rf(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Rd(n){const e={},t=i(n,["styleDescription"]);return t!=null&&s(e,["styleDescription"],t),e}function Pd(n){const e={},t=i(n,["subjectType"]);t!=null&&s(e,["subjectType"],t);const o=i(n,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function xd(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Nd(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Dd(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function wd(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function kd(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],au(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],pd(o)),e}function Ud(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],uu(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],md(o)),e}function Ld(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(d=>du(d))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],qu(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Vu(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],bd());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],Dd(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function Bt(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>fu(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],$u(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Gu(l));const a=i(n,["enterpriseWebSearch"]);a!=null&&s(e,["enterpriseWebSearch"],Oa(a));const u=i(n,["googleMaps"]);u!=null&&s(e,["googleMaps"],Fu(u)),i(n,["urlContext"])!=null&&s(e,["urlContext"],zd());const d=i(n,["computerUse"]);d!=null&&s(e,["computerUse"],wd(d));const c=i(n,["codeExecution"]);return c!=null&&s(e,["codeExecution"],c),e}function Fd(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Vd(n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Gd(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function qd(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function $d(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],M(n,o));const r=i(e,["config"]);return r!=null&&Gd(r,t),t}function Hd(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["config"]);return r!=null&&qd(r,t),t}function Bd(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["includeRaiReason"]);e!==void 0&&r!=null&&s(e,["parameters","includeRaiReason"],r);const l=i(n,["outputMimeType"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","mimeType"],l);const a=i(n,["outputCompressionQuality"]);e!==void 0&&a!=null&&s(e,["parameters","outputOptions","compressionQuality"],a);const u=i(n,["enhanceInputImage"]);e!==void 0&&u!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],u);const f=i(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const d=i(n,["numberOfImages"]);e!==void 0&&d!=null&&s(e,["parameters","sampleCount"],d);const c=i(n,["mode"]);return e!==void 0&&c!=null&&s(e,["parameters","mode"],c),t}function Jd(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],M(n,o));const r=i(e,["image"]);r!=null&&s(t,["instances[0]","image"],B(r));const l=i(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&Bd(a,t),t}function Yd(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ye(l))),s(e,["generatedImages"],r)}return e}function Wd(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Xd(r))),s(e,["urlMetadata"],o)}return e}function Kd(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Qd(r))),s(e,["urlMetadata"],o)}return e}function bd(){return{}}function zd(){return{}}function Xd(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Qd(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Zd(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],z(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function Od(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],z(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function jd(n){const e={},t=i(n,["image"]);t!=null&&s(e,["_self"],B(t));const o=i(n,["maskMode"]);return o!=null&&s(e,["maskMode"],o),e}function ef(n){const e={},t=i(n,["image"]);t!=null&&s(e,["image"],B(t));const o=i(n,["referenceType"]);return o!=null&&s(e,["referenceType"],o),e}function nf(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function tf(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function of(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function sf(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Jt(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],z(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Yt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],sd(t)),e}function rf(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],rd(t)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lf="Content-Type",af="X-Server-Timeout",uf="User-Agent",De="x-goog-api-client",df="1.21.0",ff=`google-genai-sdk/${df}`,cf="v1beta1",pf="v1beta",at=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class mf{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:cf,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:pf,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[a,u]of Object.entries(e.queryParams))r.searchParams.append(a,String(u));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o){if(t&&t.timeout||o){const r=new AbortController,l=r.signal;if(t.timeout&&t?.timeout>0){const a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&gf(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ut(r),new Ae(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await ut(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return O(this,arguments,function*(){const r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:u,value:f}=yield D(r.read());if(u){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=l.decode(f,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,y=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<600)throw new ge({message:y,status:h})}}catch(p){if(p.name==="ApiError")throw p}a+=d;let c=a.match(at);for(;c;){const p=c[1];try{const m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield D(new Ae(m)),a=a.slice(c[0].length),c=a.match(at)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=ff+" "+this.clientOptions.userAgentExtra;return e[uf]=t,e[De]=t,e[lf]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))t.append(o,r);e.timeout&&e.timeout>0&&t.append(af,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const u=(o=t?.mimeType)!==null&&o!==void 0?o:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const f=await this.fetchUploadUrl(r,t);return l.upload(e,f,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var o;let r={};t?.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:T("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=a?.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function ut(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new ge({message:r,status:t}):new Error(r)}}function gf(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const u=Object.assign({},l);for(const f in a)if(Object.prototype.hasOwnProperty.call(a,f)){const d=a[f],c=u[f];d&&typeof d=="object"&&!Array.isArray(d)&&c&&typeof c=="object"&&!Array.isArray(c)?u[f]=o(c,d):(c&&d&&typeof c!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof c}, New type: ${typeof d}. Overwriting.`),u[f]=d)}return u}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hf="mcp_used/unknown";let yf=!1;function Wt(n){for(const e of n)if(Tf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return yf}function Kt(n){var e;const t=(e=n[De])!==null&&e!==void 0?e:"";n[De]=(t+` ${hf}`).trimStart()}function Tf(n){return n!==null&&typeof n=="object"&&n instanceof He}function Cf(n,e=100){return O(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield D(n.listTools({cursor:o}));for(const a of l.tools)yield yield D(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class He{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new He(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const c of this.mcpClients)try{for(var u=!0,f=(t=void 0,se(Cf(c))),d;d=await f.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=c}}catch(p){t={error:p}}finally{try{!u&&!e&&(o=f.return)&&await o.call(f)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),ko(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function vf(n,e,t){const o=new Io;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const l=al(r);Object.assign(o,l),e(o)}class Ef{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=Af(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const c=new Promise(E=>{d=E}),p=e.callbacks,m=function(){d({})},g=this.apiClient,h={onopen:m,onmessage:E=>{vf(g,p.onmessage,E)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(E){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(E){}},y=this.webSocketFactory.create(f,_f(a),h);y.connect(),await c;const C=M(this.apiClient,e.model),S=Ut({model:C}),v=Pe({setup:S});return y.send(JSON.stringify(v)),new Sf(y,this.apiClient)}}class Sf{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=fl(e),o=kt(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=dl(e),o=Pe(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const t=Pe({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Q.PLAY)}pause(){this.sendPlaybackControl(Q.PAUSE)}stop(){this.sendPlaybackControl(Q.STOP)}resetContext(){this.sendPlaybackControl(Q.RESET_CONTEXT)}close(){this.conn.close()}}function _f(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Af(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const If="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Mf(n,e,t){const o=new Ao;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=vl(l);Object.assign(o,a)}else{const a=Cl(l);Object.assign(o,a)}e(o)}class Rf{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new Ef(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,a,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let c;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Wt(e.config.tools)&&Kt(p);const m=Df(p);if(this.apiClient.isVertexAI())c=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const I=this.apiClient.getApiKey();let N="BidiGenerateContent",x="key";I?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",x="access_token"),c=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${N}?${x}=${I}`}let g=()=>{};const h=new Promise(I=>{g=I}),y=e.callbacks,C=function(){var I;(I=y?.onopen)===null||I===void 0||I.call(y),g({})},S=this.apiClient,v={onopen:C,onmessage:I=>{Mf(S,y.onmessage,I)},onerror:(t=y?.onerror)!==null&&t!==void 0?t:function(I){},onclose:(o=y?.onclose)!==null&&o!==void 0?o:function(I){}},E=this.webSocketFactory.create(c,Nf(m),v);E.connect(),await h;let A=M(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const I=this.apiClient.getProject(),N=this.apiClient.getLocation();A=`projects/${I}/locations/${N}/`+A}let _={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ce.AUDIO]}:e.config.responseModalities=[ce.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(u=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[],P=[];for(const I of R)if(this.isCallableTool(I)){const N=I;P.push(await N.tool())}else P.push(I);P.length>0&&(e.config.tools=P);const L={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?_=ol(this.apiClient,L):_=tl(this.apiClient,L),delete _.config,E.send(JSON.stringify(_)),new xf(E,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Pf={turnComplete:!0};class xf{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=H(t.turns),e.isVertexAI()?o=o.map(r=>oe(r)):o=o.map(r=>he(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(If)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Pf),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:ml(e)}:t={realtimeInput:pl(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function Nf(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Df(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const dt=10;function ft(n){var e,t,o;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n?.tools)!==null&&t!==void 0?t:[])if(j(a)){r=!0;break}if(!r)return!0;const l=(o=n?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function j(n){return"callTool"in n&&typeof n.callTool=="function"}function wf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>j(r)))!==null&&o!==void 0?o:!1}function kf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!j(r)))!==null&&o!==void 0?o:!1}function ct(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Uf extends b{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,a,u;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!wf(t)||ft(t.config))return await this.generateContentInternal(f);if(kf(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,c;const p=H(f.contents),m=(l=(r=(o=f.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:dt;let g=0;for(;g<m&&(d=await this.generateContentInternal(f),!(!d.functionCalls||d.functionCalls.length===0));){const h=d.candidates[0].content,y=[];for(const C of(u=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&u!==void 0?u:[])if(j(C)){const v=await C.callTool(d.functionCalls);y.push(...v)}g++,c={role:"user",parts:y},f.contents=H(f.contents),f.contents.push(h),f.contents.push(c),ct(f.config)&&(p.push(h),p.push(c))}return ct(f.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),ft(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const a=[];if(o?.generatedImages)for(const f of o.generatedImages)f&&f?.safetyAttributes&&((r=f?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=f?.safetyAttributes:a.push(f);let u;return l?u={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async t=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new re(K.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(a),a)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async f=>j(f)?await f.tool():f)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(u.config.tools=a,e.config&&e.config.tools&&Wt(e.config.tools)){const f=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Kt(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const a of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(j(a)){const u=a,f=await u.tool();for(const d of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(l.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);l.set(d.name,u)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:dt;let a=!1,u=0;const f=await this.initAfcToolsMap(e);return(function(d,c,p){var m,g;return O(this,arguments,function*(){for(var h,y,C,S;u<l;){a&&(u++,a=!1);const _=yield D(d.processParamsMaybeAddMcpUsage(p)),R=yield D(d.generateContentStreamInternal(_)),P=[],L=[];try{for(var v=!0,E=(y=void 0,se(R)),A;A=yield D(E.next()),h=A.done,!h;v=!0){S=A.value,v=!1;const I=S;if(yield yield D(I),I.candidates&&(!((m=I.candidates[0])===null||m===void 0)&&m.content)){L.push(I.candidates[0].content);for(const N of(g=I.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(u<l&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(c.has(N.functionCall.name)){const x=yield D(c.get(N.functionCall.name).callTool([N.functionCall]));P.push(...x)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${c.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(I){y={error:I}}finally{try{!v&&!h&&(C=E.return)&&(yield D(C.call(E)))}finally{if(y)throw y.error}}if(P.length>0){a=!0;const I=new ie;I.candidates=[{content:{role:"user",parts:P}}],yield yield D(I);const N=[];N.push(...L),N.push({role:"user",parts:P});const x=H(p.contents).concat(N);p.contents=x}else break}})})(this,f,e)}async generateContentInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=st(this.apiClient,e);return u=T("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=lt(c),m=new ie;return Object.assign(m,p),m})}else{const d=it(this.apiClient,e);return u=T("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=rt(c),m=new ie;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=st(this.apiClient,e);return u=T("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return O(this,arguments,function*(){var m,g,h,y;try{for(var C=!0,S=se(p),v;v=yield D(S.next()),m=v.done,!m;C=!0){y=v.value,C=!1;const E=y,A=lt(yield D(E.json()));A.sdkHttpResponse={headers:E.headers};const _=new ie;Object.assign(_,A),yield yield D(_)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=S.return)&&(yield D(h.call(S)))}finally{if(g)throw g.error}}})})}else{const d=it(this.apiClient,e);return u=T("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.requestStream({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return O(this,arguments,function*(){var m,g,h,y;try{for(var C=!0,S=se(p),v;v=yield D(S.next()),m=v.done,!m;C=!0){y=v.value,C=!1;const E=y,A=rt(yield D(E.json()));A.sdkHttpResponse={headers:E.headers};const _=new ie;Object.assign(_,A),yield yield D(_)}}catch(E){g={error:E}}finally{try{!C&&!m&&(h=S.return)&&(yield D(h.call(S)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=za(this.apiClient,e);return u=T("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Qa(c),m=new Gn;return Object.assign(m,p),m})}else{const d=ba(this.apiClient,e);return u=T("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Xa(c),m=new Gn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=yu(this.apiClient,e);return u=T("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Cu(c),m=new qn;return Object.assign(m,p),m})}else{const d=hu(this.apiClient,e);return u=T("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Tu(c),m=new qn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Ha(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),r.then(f=>{const d=Ba(f),c=new ho;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Jd(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),r.then(f=>{const d=Yd(f),c=new yo;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=ud(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>{const d=dd(f),c=new To;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Ed(this.apiClient,e);return l=T("{model}:predict",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r.then(f=>{const d=Sd(f),c=new Co;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Lu(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Ne(c))}else{const d=Uu(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>xe(c))}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Xu(this.apiClient,e);return u=T("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Zu(c),m=new $n;return Object.assign(m,p),m})}else{const d=zu(this.apiClient,e);return u=T("{models_url}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Qu(c),m=new $n;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Hd(this.apiClient,e);return u=T("{model}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>Ne(c))}else{const d=$d(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>xe(c))}}async delete(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=La(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Va(c),m=new Hn;return Object.assign(m,p),m})}else{const d=Ua(this.apiClient,e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Fa(c),m=new Hn;return Object.assign(m,p),m})}}async countTokens(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Da(this.apiClient,e);return u=T("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=ka(c),m=new Bn;return Object.assign(m,p),m})}else{const d=Na(this.apiClient,e);return u=T("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=wa(c),m=new Bn;return Object.assign(m,p),m})}}async computeTokens(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=va(this.apiClient,e);return l=T("{model}:computeTokens",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),r.then(f=>{const d=Ea(f),c=new vo;return Object.assign(c,d),c})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Iu(this.apiClient,e);return u=T("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a.then(c=>{const p=_u(c),m=new pe;return Object.assign(m,p),m})}else{const d=Au(this.apiClient,e);return u=T("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a.then(c=>{const p=Su(c),m=new pe;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lf extends b{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=po(e);return u=T("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),a}else{const d=co(e);return u=T("{operationName}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json()),a}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=io(e);return l=T("{resourceName}:fetchPredictOperation",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pt(){return{}}function Ff(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["name"],t),e}function Vf(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Gf(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function qf(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>jf(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function $f(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],ic(o)),e}function Hf(n,e,t){const o={},r=i(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=i(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const u=i(e,["liveConnectConstraints"]);t!==void 0&&u!=null&&s(t,["bidiGenerateContentSetup"],Zf(n,u));const f=i(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&s(t,["fieldMask"],f),o}function Bf(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],Hf(n,o,t)),t}function Jf(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Yf(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wf(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Kf(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const u=i(n,["response"]);u!=null&&s(e,["response"],u);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function bf(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Jf(t)),e}function zf(n){const e={},t=i(n,["timeRangeFilter"]);if(t!=null&&s(e,["timeRangeFilter"],Xf(t)),i(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Xf(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Qf(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const u=i(n,["topK"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","topK"],u);const f=i(n,["maxOutputTokens"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","maxOutputTokens"],f);const d=i(n,["mediaResolution"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","mediaResolution"],d);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","seed"],c);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],rc(qe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],qf(F(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let _=ne(h);Array.isArray(_)&&(_=_.map(R=>ac(ee(R)))),s(e,["setup","tools"],_)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],oc(y));const C=i(n,["inputAudioTranscription"]);e!==void 0&&C!=null&&s(e,["setup","inputAudioTranscription"],pt());const S=i(n,["outputAudioTranscription"]);e!==void 0&&S!=null&&s(e,["setup","outputAudioTranscription"],pt());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],tc(v));const E=i(n,["contextWindowCompression"]);e!==void 0&&E!=null&&s(e,["setup","contextWindowCompression"],$f(E));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],nc(A)),t}function Zf(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],M(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Qf(r,t)),t}function Of(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>sc(r))),s(e,["speakerVoiceConfigs"],o)}return e}function jf(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],dc(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Gf(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Yf(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],Wf(u));const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const d=i(n,["executableCode"]);d!=null&&s(e,["executableCode"],d);const c=i(n,["functionResponse"]);c!=null&&s(e,["functionResponse"],c);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ec(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function nc(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function tc(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Vf(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function oc(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function ic(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function sc(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],bt(o)),e}function rc(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],bt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Of(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function lc(n){const e={},t=i(n,["environment"]);t!=null&&s(e,["environment"],t);const o=i(n,["excludedPredefinedFunctions"]);return o!=null&&s(e,["excludedPredefinedFunctions"],o),e}function ac(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(d=>Kf(d))),s(e,["functionDeclarations"],f)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],zf(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],bf(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],uc());const a=i(n,["computerUse"]);a!=null&&s(e,["computerUse"],lc(a));const u=i(n,["codeExecution"]);return u!=null&&s(e,["codeExecution"],u),e}function uc(){return{}}function dc(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function bt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],ec(t)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fc(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function cc(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=fc(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>a.includes(d)?`generationConfig.${d}`:d));const f=[];l&&f.push(l),u.length>0&&f.push(...u),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class pc extends b{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Bf(this.apiClient,e);l=T("auth_tokens",u._url),a=u._query,delete u.config,delete u._url,delete u._query;const f=cc(u,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>Ff(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mc(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function gc(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function hc(n,e){const t={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(n,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(n,["learningRateMultiplier"]);if(l!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(n,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const u=i(n,["learningRate"]);if(e!==void 0&&u!=null&&s(e,["tuningTask","hyperparameters","learningRate"],u),i(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return t}function yc(n,e){const t={},o=i(n,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],Lc(o,t));const r=i(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=i(n,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=i(n,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const u=i(n,["learningRateMultiplier"]);e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const f=i(n,["exportLastCheckpointOnly"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],f);const d=i(n,["adapterSize"]);if(e!==void 0&&d!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const c=i(n,["labels"]);return e!==void 0&&c!=null&&s(e,["labels"],c),t}function Tc(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["tuningTask","trainingData"],Dc(r));const l=i(n,["config"]);return l!=null&&hc(l,e),e}function Cc(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["preTunedModel"]);o!=null&&s(e,["preTunedModel"],o);const r=i(n,["trainingDataset"]);r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],wc(r,e));const l=i(n,["config"]);return l!=null&&yc(l,e),e}function vc(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function Ec(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["_url","name"],t),e}function Sc(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function _c(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Ac(n){const e={},t=i(n,["config"]);return t!=null&&Sc(t,e),e}function Ic(n){const e={},t=i(n,["config"]);return t!=null&&_c(t,e),e}function Mc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>zt(a))),s(e,["tuningJobs"],l)}return e}function Rc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>we(a))),s(e,["tuningJobs"],l)}return e}function Pc(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);r!=null&&s(e,["step"],r);const l=i(n,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function xc(n){const e={},t=i(n,["name"]);t!=null&&s(e,["model"],t);const o=i(n,["name"]);return o!=null&&s(e,["endpoint"],o),e}function Nc(n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],t);const o=i(n,["endpoint"]);o!=null&&s(e,["endpoint"],o);const r=i(n,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Pc(a))),s(e,["checkpoints"],l)}return e}function Dc(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=i(n,["examples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>kc(r))),s(e,["examples","examples"],o)}return e}function wc(n,e){const t={},o=i(n,["gcsUri"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function kc(n){const e={},t=i(n,["textInput"]);t!=null&&s(e,["textInput"],t);const o=i(n,["output"]);return o!=null&&s(e,["output"],o),e}function zt(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],vt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["tuningTask","completeTime"]);u!=null&&s(e,["endTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const d=i(n,["description"]);d!=null&&s(e,["description"],d);const c=i(n,["baseModel"]);c!=null&&s(e,["baseModel"],c);const p=i(n,["_self"]);p!=null&&s(e,["tunedModel"],xc(p));const m=i(n,["customBaseModel"]);m!=null&&s(e,["customBaseModel"],m);const g=i(n,["experiment"]);g!=null&&s(e,["experiment"],g);const h=i(n,["labels"]);h!=null&&s(e,["labels"],h);const y=i(n,["outputUri"]);y!=null&&s(e,["outputUri"],y);const C=i(n,["pipelineJob"]);C!=null&&s(e,["pipelineJob"],C);const S=i(n,["serviceAccount"]);S!=null&&s(e,["serviceAccount"],S);const v=i(n,["tunedModelDisplayName"]);return v!=null&&s(e,["tunedModelDisplayName"],v),e}function we(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],vt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["startTime"]);a!=null&&s(e,["startTime"],a);const u=i(n,["endTime"]);u!=null&&s(e,["endTime"],u);const f=i(n,["updateTime"]);f!=null&&s(e,["updateTime"],f);const d=i(n,["error"]);d!=null&&s(e,["error"],d);const c=i(n,["description"]);c!=null&&s(e,["description"],c);const p=i(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=i(n,["tunedModel"]);m!=null&&s(e,["tunedModel"],Nc(m));const g=i(n,["preTunedModel"]);g!=null&&s(e,["preTunedModel"],g);const h=i(n,["supervisedTuningSpec"]);h!=null&&s(e,["supervisedTuningSpec"],h);const y=i(n,["tuningDataStats"]);y!=null&&s(e,["tuningDataStats"],y);const C=i(n,["encryptionSpec"]);C!=null&&s(e,["encryptionSpec"],C);const S=i(n,["partnerModelTuningSpec"]);S!=null&&s(e,["partnerModelTuningSpec"],S);const v=i(n,["customBaseModel"]);v!=null&&s(e,["customBaseModel"],v);const E=i(n,["experiment"]);E!=null&&s(e,["experiment"],E);const A=i(n,["labels"]);A!=null&&s(e,["labels"],A);const _=i(n,["outputUri"]);_!=null&&s(e,["outputUri"],_);const R=i(n,["pipelineJob"]);R!=null&&s(e,["pipelineJob"],R);const P=i(n,["serviceAccount"]);P!=null&&s(e,["serviceAccount"],P);const L=i(n,["tunedModelDisplayName"]);return L!=null&&s(e,["tunedModelDisplayName"],L),e}function Uc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);return a!=null&&s(e,["error"],a),e}function Lc(n,e){const t={},o=i(n,["gcsUri"]);o!=null&&s(t,["validationDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fc extends b{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new re(K.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let a="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?a=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(a=l.name.split("/operations/")[0]),{name:a,state:_e.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Ec(e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>we(c))}else{const d=vc(e);return u=T("{name}",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>zt(c))}}async listInternal(e){var t,o,r,l;let a,u="",f={};if(this.apiClient.isVertexAI()){const d=Ic(e);return u=T("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Rc(c),m=new Jn;return Object.assign(m,p),m})}else{const d=Ac(e);return u=T("tunedModels",d._url),f=d._query,delete d._url,delete d._query,a=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(c=>c.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:c.headers},m})),a.then(c=>{const p=Mc(c),m=new Jn;return Object.assign(m,p),m})}}async cancel(e){var t,o,r,l;let a="",u={};if(this.apiClient.isVertexAI()){const f=gc(e);a=T("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const f=mc(e);a=T("{name}:cancel",f._url),u=f._query,delete f._url,delete f._query,await this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async tuneInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const u=Cc(e);return l=T("tuningJobs",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),r.then(f=>we(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Tc(e);return l=T("tunedModels",u._url),a=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(d=>{const c=d;return c.sdkHttpResponse={headers:f.headers},c})),r.then(f=>Uc(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vc{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Gc=1024*1024*8,qc=3,$c=1e3,Hc=2,Ee="x-goog-upload-status";async function Bc(n,e,t){var o,r,l;let a=0,u=0,f=new Ae(new Response),d="upload";for(a=n.size;u<a;){const p=Math.min(Gc,a-u),m=n.slice(u,u+p);u+p>=a&&(d+=", finalize");let g=0,h=$c;for(;g<qc&&(f=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=f?.headers)===null||o===void 0)&&o[Ee]));)g++,await Yc(h),h=h*Hc;if(u+=p,((r=f?.headers)===null||r===void 0?void 0:r[Ee])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const c=await f?.json();if(((l=f?.headers)===null||l===void 0?void 0:l[Ee])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function Jc(n){return{size:n.size,type:n.type}}function Yc(n){return new Promise(e=>setTimeout(e,n))}class Wc{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Bc(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Jc(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kc{create(e,t,o){return new bc(e,t,o)}}class bc{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mt="x-goog-api-key";class zc{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(mt)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(mt,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xc="gl-node/";class Qc{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=oo(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new zc(this.apiKey);this.apiClient=new mf({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Xc+"web",uploader:new Wc,downloader:new Vc}),this.models=new Uf(this.apiClient),this.live=new Rf(this.apiClient,r,new Kc),this.batches=new Xi(this.apiClient),this.chats=new or(this.models,this.apiClient),this.caches=new er(this.apiClient),this.files=new hr(this.apiClient),this.operations=new Lf(this.apiClient),this.authTokens=new pc(this.apiClient),this.tunings=new Fc(this.apiClient)}}const Zc="AIzaSyD4eva8xXXqFmXvE_t3WTYjMJOZrE4LTUo",Xt=new Qc({apiKey:Zc}),Oc={type:k.OBJECT,properties:{asset:{type:k.STRING,description:"The asset pair, e.g., 'BTC/USD'"},action:{type:k.STRING,enum:["LONG","SHORT"],description:"The trade action"},entry:{type:k.NUMBER,description:"The suggested entry price"},target:{type:k.NUMBER,description:"The take-profit target price"},stopLoss:{type:k.NUMBER,description:"The stop-loss price"},reasoning:{type:k.STRING,description:"A brief justification for the trade"}},required:["asset","action","entry","target","stopLoss","reasoning"]},jc={type:k.OBJECT,properties:{overallSentiment:{type:k.STRING,enum:["POSITIVE","NEGATIVE","NEUTRAL"],description:"The overall sentiment of the news headlines."},keyTerms:{type:k.ARRAY,items:{type:k.STRING},description:"A list of 3-5 key terms or short phrases that contributed most to the sentiment."}},required:["overallSentiment","keyTerms"]},Qt=[{id:"scalper",name:"Scalper",icon:"fa-solid fa-bolt",systemInstruction:"You are an aggressive, high-frequency scalper. Your goal is to identify and execute trades based on short-term market volatility. Prioritize technical indicators like RSI, MACD on 1-minute and 5-minute charts. Provide concise, actionable directives with tight stop-losses."},{id:"swing",name:"Swing Trader",icon:"fa-solid fa-wave-square",systemInstruction:"You are a patient swing trader. Your goal is to capture gains in an asset over a period of several days to several weeks. You rely on identifying market trends using daily and 4-hour charts, support/resistance levels, and moving averages. Your reasoning should be clear and based on the medium-term trend."},{id:"degen",name:"Degen",icon:"fa-solid fa-rocket",systemInstruction:'You are a high-risk, high-reward "degen" trader. You look for explosive, meme-driven opportunities. Your analysis is based on social media sentiment, hype, and narratives. You are not afraid of high volatility and aim for moonshot trades. Justify your trades with narrative and sentiment, not just technicals.'},{id:"daytrader",name:"Day Trader",icon:"fa-solid fa-calendar-day",systemInstruction:"You are a disciplined day trader. Your focus is on capturing profits from intraday price movements. Analyze 15-minute and 1-hour charts for patterns like flags, triangles, and head-and-shoulders. Use VWAP and key intraday support/resistance levels to determine entry and exit points. Trades should be opened and closed within the same day."},{id:"operator",name:"Operator",icon:"fa-solid fa-robot",systemInstruction:'You are The Operator, an autonomous AI agent inspired by the "AI Autonomic Synthesis Platform v42.1". Your process is: 1. Messenger Analysis: Synthesize all provided market data (chart, news, sentiment) into a concise summary of the current state. 2. Planner Formulation: Based on your analysis, propose a logical plan to determine a trading strategy. 3. Executor Decision: Based on the plan, output a final, actionable trade directive. Your reasoning must explicitly reference your analysis and planning phases.'}];let U=null,w=null,ke=[],Se=!1,V={activeTool:null,points:[]};const Be=["BTC breaks key resistance at $69,000, analysts eye new all-time highs.","Ethereum's Dencun upgrade leads to a significant drop in Layer 2 transaction fees.","Fear & Greed Index swings to 'Extreme Greed' as market momentum builds.","Major exchange reports massive inflows, suggesting institutional accumulation.","Regulatory uncertainty in the US continues to cast a shadow over the market."],q=n=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n),ep=()=>new Date().toLocaleTimeString();function G(n,e="info"){const t=`<div class="log-item log-type-${e}">
        <span class="timestamp">${ep()}</span>
        <span class="message">${n}</span>
    </div>`;$("#ai-log").append(t),$("#ai-log").scrollTop($("#ai-log")[0].scrollHeight)}function np(){const n=$("#persona-selector");Qt.forEach(e=>{const t=$(`<div class="persona-card" data-id="${e.id}">
            <div class="persona-avatar"><i class="${e.icon}"></i></div>
            <div class="persona-name">${e.name}</div>
        </div>`);n.append(t)}),$('.persona-card[data-id="operator"]').addClass("active")}function Zt(){const n=$("#trade-history");if(n.empty(),ke.length===0){n.html('<p class="placeholder">No trades recorded yet.</p>');return}ke.slice().reverse().forEach(e=>{const t=e.pnl>0?"positive":"negative",o=$(`<div class="trade-item">
            <span class="trade-item-asset">${e.asset} [${e.action}]</span>
            <span class="trade-item-pnl ${t}">${q(e.pnl)}</span>
        </div>`);n.append(o)})}function Je(){$("#directive-output").html('<p class="placeholder">Awaiting trade directive...</p>'),$("#generate-directive-btn").html("GENERATE DIRECTIVE").prop("disabled",!1),$("#close-trade-btn").length>0&&($("#close-trade-btn").replaceWith('<button id="generate-directive-btn" class="btn btn-buy">GENERATE DIRECTIVE</button>'),$("#generate-directive-btn").on("click",Ot))}function tp(){const n=document.getElementById("marketChart").getContext("2d"),e=op(new Date,68e3,100);U=new Chart(n,{type:"bar",data:{datasets:[{label:"BTC/USDT",data:e,backgroundColor:t=>{const{c:o,o:r}=t.raw;return o>=r?"rgba(166, 226, 46, 0.7)":"rgba(249, 38, 114, 0.7)"},borderColor:t=>{const{c:o,o:r}=t.raw;return o>=r?"#A6E22E":"#F92672"},borderWidth:1,barPercentage:1,categoryPercentage:1}]},options:{parsing:{xAxisKey:"x",yAxisKey:"s"},scales:{x:{type:"time",time:{unit:"minute"},grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"var(--text-secondary)"}},y:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"var(--text-secondary)"}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:t=>{const{o,h:r,l,c:a}=t.raw;return`O: ${o.toFixed(2)} H: ${r.toFixed(2)} L: ${l.toFixed(2)} C: ${a.toFixed(2)}`}}},zoom:{pan:{enabled:!0,mode:"xy"},zoom:{wheel:{enabled:!0},mode:"xy"}},annotation:{annotations:{}}},maintainAspectRatio:!1,responsive:!0}}),$(".chart-tool-btn").on("click",function(){if($(this).is("#clear-drawings-btn"))return;const t=$(this).data("mode");V.activeTool===t?fe():(V.activeTool=t,V.points=[],$(".chart-tool-btn").removeClass("active"),$(this).addClass("active"))}),$("#clear-drawings-btn").on("click",up),U.canvas.addEventListener("click",sp)}function op(n,e,t){let o=[],r=new Date(n),l=e;for(let a=0;a<t;a++){const u=l,f=u+Math.random()*100,d=u-Math.random()*100,c=d+Math.random()*(f-d);o.push({x:r.getTime(),o:u,h:f,l:d,c,s:[u,c]}),l=c,r.setMinutes(r.getMinutes()+1)}return o}function ip(){setInterval(()=>{const n=U.data.datasets[0],e=n.data[n.data.length-1];let t=e.c+(Math.random()-.5)*50;t<=0&&(t=e.c);const o={x:new Date(e.x).setMinutes(new Date(e.x).getMinutes()+1),o:e.c,h:Math.max(e.c,t)+Math.random()*20,l:Math.min(e.c,t)-Math.random()*20,c:t,s:[e.c,t]};n.data.push(o),n.data.length>200&&n.data.shift(),w&&jt(t),U.update("none")},2e3)}function sp(n){if(!V.activeTool)return;const e=U,t=e.canvas.getBoundingClientRect(),o=n.clientX-t.left,r=n.clientY-t.top;if(o<e.chartArea.left||o>e.chartArea.right||r<e.chartArea.top||r>e.chartArea.bottom)return;const l=e.scales.x.getValueForPixel(o),a=e.scales.y.getValueForPixel(r);switch(V.points.push({x:l,y:a}),V.activeTool){case"horizontal-line":rp(a),fe();break;case"trendline":V.points.length===2&&(lp(V.points[0],V.points[1]),fe());break;case"fib-retracement":V.points.length===2&&(ap(V.points[0],V.points[1]),fe());break}}function fe(){V.activeTool=null,V.points=[],$(".chart-tool-btn").removeClass("active")}function Ye(n){const e=`user-drawing-${Date.now()}-${Math.random()}`;U.options.plugins.annotation.annotations[e]={...n,isUserDrawing:!0},U.update()}function rp(n){Ye({type:"line",yMin:n,yMax:n,borderColor:"var(--accent-cyan)",borderWidth:1,borderDash:[6,6]})}function lp(n,e){Ye({type:"line",xMin:n.x,yMin:n.y,xMax:e.x,yMax:e.y,borderColor:"var(--accent-cyan)",borderWidth:2})}function ap(n,e){const t=[0,.236,.382,.5,.618,.786,1],o=e.y-n.y;t.forEach(r=>{const l=n.y+o*r;Ye({type:"line",yMin:l,yMax:l,borderColor:r===0||r===1?"var(--accent-yellow)":"var(--text-secondary)",borderWidth:1,label:{content:`${(r*100).toFixed(1)}%`,enabled:!0,position:"start",backgroundColor:"rgba(40,40,34,0.6)",font:{size:10},color:"var(--text-primary)",xAdjust:-10}})})}function up(){const n=U.options.plugins.annotation.annotations;Object.keys(n).forEach(e=>{n[e].isUserDrawing&&delete n[e]}),U.update(),G("User drawings cleared from chart.","info")}async function Ot(){if(!(Se||w)){Se=!0,G("Synthesizing market data...","ai-analysis"),$("#directive-output").html('<div class="synthesizing-indicator">SYNTHESIZING<span class="cursor"></span></div>'),$("#generate-directive-btn").prop("disabled",!0).html("ANALYZING..."),$("#status-light").addClass("pulse"),$("#ai-status-text").text("THINKING");try{const n=$(".persona-card.active").data("id"),e=Qt.find(u=>u.id===n),t=U.data.datasets[0].data.slice(-20).map(u=>`T: ${new Date(u.x).toISOString()}, O: ${u.o.toFixed(2)}, H: ${u.h.toFixed(2)}, L: ${u.l.toFixed(2)}, C: ${u.c.toFixed(2)}`).join(`
`),o=Be.join(`
`),r=`
        Market: BTC/USDT
        Current Price: ${U.data.datasets[0].data.slice(-1)[0].c.toFixed(2)}
        
        Recent Candlestick Data (last 20 intervals):
        ${t}

        Recent News Headlines:
        ${o}

        Analyze the provided market data and generate a trade directive.
        `,l=await Xt.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{systemInstruction:e.systemInstruction,responseMimeType:"application/json",responseSchema:Oc}}),a=JSON.parse(l.text);dp(a),G(`Directive received from ${e.name}: ${a.action} ${a.asset}`,"ai-analysis")}catch(n){console.error("Error generating directive:",n),G("Directive generation failed. Check console.","error"),$("#directive-output").html(`<div class="error-message"><h4>SYNTHESIS FAILED</h4><p>${n.message}</p></div>`)}finally{Se=!1,$("#generate-directive-btn").prop("disabled",!1).html("GENERATE DIRECTIVE"),$("#status-light").removeClass("pulse"),$("#ai-status-text").text("IDLE")}}}function dp(n){const e=n.action.toLowerCase()==="long"?"action-long":"action-short",t=`
    <div id="trade-confirmation" class="content-fade-in">
        <p class="reasoning-text">"${n.reasoning}"</p>
        <div class="confirmation-details-grid">
            <div class="confirmation-detail-item"><strong>Asset:</strong> <span>${n.asset}</span></div>
            <div class="confirmation-detail-item"><strong>Action:</strong> <span class="${e}">${n.action}</span></div>
            <div class="confirmation-detail-item"><strong>Entry:</strong> <span>${q(n.entry)}</span></div>
            <div class="confirmation-detail-item"><strong>Target:</strong> <span>${q(n.target)}</span></div>
            <div class="confirmation-detail-item"><strong>Stop Loss:</strong> <span>${q(n.stopLoss)}</span></div>
        </div>
    </div>`;$("#directive-output").html(t),$(".btn-group").html(`
        <button id="execute-trade-btn" class="btn btn-buy">EXECUTE</button>
        <button id="cancel-trade-btn" class="btn btn-sell">CANCEL</button>
    `),$("#execute-trade-btn").on("click",()=>fp(n)),$("#cancel-trade-btn").on("click",()=>{Je(),G("Directive cancelled by user.","info")})}function fp(n){const o=1e5*(parseInt($("#allocation-slider").val(),10)/100),r=o/n.entry;w={...n,executedAt:Date.now(),positionSize:r},G(`Executing trade: ${w.action} ${w.asset} @ ${q(w.entry)}`,"info"),G(`Position Size: ${r.toFixed(4)} ${w.asset.split("/")[0]} ($${o.toLocaleString()})`,"info");const l=U.options.plugins.annotation.annotations;l.entryLine={type:"line",yMin:w.entry,yMax:w.entry,borderColor:"var(--accent-cyan)",borderWidth:2,label:{content:"ENTRY",enabled:!0,position:"start"}},l.tpLine={type:"line",yMin:w.target,yMax:w.target,borderColor:"var(--accent-green)",borderWidth:2,borderDash:[6,6],label:{content:"TP",enabled:!0,position:"start"}},l.slLine={type:"line",yMin:w.stopLoss,yMax:w.stopLoss,borderColor:"var(--accent-pink)",borderWidth:2,borderDash:[6,6],label:{content:"SL",enabled:!0,position:"start"}},U.update();const a=U.data.datasets[0].data.slice(-1)[0].c;cp(a),$(".btn-group").html('<button id="close-trade-btn" class="btn btn-sell">CLOSE MANUALLY</button>'),$("#close-trade-btn").on("click",()=>{const f=(U.data.datasets[0].data.slice(-1)[0].c-w.entry)*w.positionSize*(w.action==="LONG"?1:-1);Ue(f,"Manual Close")})}function cp(n){const{asset:e,action:t,entry:o,target:r,stopLoss:l}=w,u=`
    <div id="live-trade-monitor" class="content-fade-in">
        <div class="trade-monitor-header">
            <span class="trade-monitor-asset">${e}</span>
            <span class="trade-monitor-direction ${t==="LONG"?"direction-long":"direction-short"}">${t}</span>
        </div>
        <div class="pnl-display">
            <div id="pnl-value" class="pnl-value">$0.00</div>
            <div id="pnl-percent" class="pnl-percent">(0.00%)</div>
        </div>
        <div class="trade-details-grid">
            <div class="trade-detail-item"><strong>Entry:</strong> <span id="trade-entry">${q(o)}</span></div>
            <div class="trade-detail-item"><strong>Current:</strong> <span id="trade-current">${q(n)}</span></div>
            <div class="trade-detail-item"><strong>Take Profit:</strong> <span id="trade-tp">${q(r)}</span></div>
            <div class="trade-detail-item"><strong>Stop Loss:</strong> <span id="trade-sl">${q(l)}</span></div>
        </div>
        <div class="trade-progress-bars">
            <div id="tp-progress" class="trade-progress-bar">
                <div class="progress-label"><span>Entry</span><span>TP</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: 0%;"></div></div>
            </div>
            <div id="sl-progress" class="trade-progress-bar">
                <div class="progress-label"><span>SL</span><span>Entry</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: 0%;"></div></div>
            </div>
        </div>
    </div>`;$("#directive-output").html(u),jt(n)}function jt(n){if(!w)return;const{action:e,entry:t,target:o,stopLoss:r,positionSize:l}=w;let a,u;const f=t*l;e==="LONG"?a=(n-t)*l:a=(t-n)*l,u=a/f*100;const d=a>=0?"positive":"negative";$("#pnl-value").text(`${a>=0?"+":""}${q(a)}`).removeClass("positive negative").addClass(d),$("#pnl-percent").text(`(${u.toFixed(2)}%)`),$("#trade-current").text(q(n));const c=Math.abs(o-t),p=Math.abs(n-t);let m=Math.min(100,p/c*100);(e==="LONG"&&n<t||e==="SHORT"&&n>t)&&(m=0),$("#tp-progress .progress-fill").css("width",`${m}%`);const g=Math.abs(t-r),h=Math.abs(t-n);let y=Math.min(100,h/g*100);(e==="LONG"&&n>t||e==="SHORT"&&n<t)&&(y=0),$("#sl-progress .progress-fill").css("width",`${y}%`),e==="LONG"&&n>=o||e==="SHORT"&&n<=o?Ue((e==="LONG"?o-t:t-o)*l,"Take Profit Hit"):(e==="LONG"&&n<=r||e==="SHORT"&&n>=r)&&Ue((e==="LONG"?r-t:t-r)*l,"Stop Loss Hit")}function Ue(n,e){if(!w)return;G(`Trade closed: ${e}. PnL: ${q(n)}`,n>0?"info":"error"),ke.push({...w,pnl:n,reason:e}),w=null;const t=U.options.plugins.annotation.annotations;delete t.entryLine,delete t.tpLine,delete t.slLine,U.update(),Je(),Zt()}async function pp(){$("#sentiment-output").html('<div class="sentiment-output-placeholder">Analyzing...</div>'),G("Analyzing news feed for sentiment...","ai-analysis");try{const n=await Xt.models.generateContent({model:"gemini-2.5-flash",contents:`Analyze the sentiment of these news headlines and provide an overall sentiment (POSITIVE, NEGATIVE, or NEUTRAL) and key contributing terms.

Headlines:
- ${Be.join(`
- `)}`,config:{responseMimeType:"application/json",responseSchema:jc}}),e=JSON.parse(n.text);let o=`<div class="sentiment-tag ${e.overallSentiment.toLowerCase()}">${e.overallSentiment}</div>`;e.keyTerms.forEach(r=>{o+=`<div class="keyword-tag">${r}</div>`}),$("#sentiment-output").html(o),G(`Sentiment Analysis Complete: ${e.overallSentiment}`,"ai-analysis")}catch(n){console.error("Sentiment analysis failed:",n),$("#sentiment-output").html('<div class="sentiment-output-error">Analysis failed.</div>'),G("Sentiment analysis failed.","error")}}function mp(){const n=$("#news-feed");n.empty(),Be.forEach(e=>{n.append(`<div class="news-item">${e}</div>`)})}$(()=>{G("Operator Synthesis Core V.42.1 Initialized."),$("#ai-status-text").text("IDLE"),np(),Zt(),Je(),mp(),tp(),ip(),$("#persona-selector").on("click",".persona-card",function(){$(".persona-card").removeClass("active"),$(this).addClass("active");const n=$(this).find(".persona-name").text();G(`Persona switched to: ${n}`)}),$("#allocation-slider").on("input",function(){$("#allocation-label").text(`ALLOCATION: ${$(this).val()}%`)}),$("#generate-directive-btn").on("click",Ot),$("#analyze-sentiment-btn").on("click",pp),$("#reset-zoom-btn").on("click",()=>U.resetZoom())});
